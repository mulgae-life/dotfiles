# Vision Prompting 가이드

이미지를 포함한 멀티모달 프롬프트 작성 방법입니다.

## TL;DR

| 작업 | 프롬프트 패턴 | 핵심 팁 |
|------|-------------|--------|
| 이미지 분석 | "이 이미지에서 X를 설명해 주세요" | 구체적 질문 |
| 차트 이해 | "이 차트의 주요 트렌드를 분석해 주세요" | 수치 요청 |
| 문서 OCR | "이 문서를 텍스트로 변환해 주세요" | 구조 유지 요청 |
| 비교 분석 | "두 이미지의 차이점을 찾아주세요" | 비교 기준 명시 |

---

## 1. 이미지 분석 기본

### 1.1 일반 설명 요청

**기본 패턴**:
```yaml
prompt: |
  이 이미지를 분석해 주세요.

  <analysis_points>
  - 주요 객체와 그 위치
  - 색상과 조명
  - 전체적인 분위기
  - 주목할 만한 세부사항
  </analysis_points>
```

**구체적 질문**:
```yaml
# ❌ 모호함
prompt: "이 이미지를 설명해 주세요"

# ✅ 구체적
prompt: |
  이 제품 사진을 분석해 주세요:
  1. 제품의 종류와 색상
  2. 배경 설정
  3. 조명 방향
  4. 마케팅 관점에서의 강점
```

### 1.2 특정 요소 추출

```yaml
prompt: |
  이 이미지에서 다음 정보를 추출해 주세요:

  <target_elements>
  - 텍스트 (모든 글자)
  - 로고 (브랜드명)
  - 숫자 (가격, 수량 등)
  - QR/바코드 (있다면)
  </target_elements>

  <output_format>
  {
    "text": ["추출된 텍스트"],
    "logos": ["발견된 로고"],
    "numbers": ["발견된 숫자"],
    "codes": ["QR/바코드 정보"]
  }
  </output_format>
```

### 1.3 객체 탐지

```yaml
prompt: |
  이 이미지에서 모든 사람을 찾아주세요.

  각 사람에 대해:
  - 대략적인 위치 (왼쪽/중앙/오른쪽, 상단/하단)
  - 추정 연령대
  - 의상 색상
  - 행동 (서있음, 앉음, 걸음 등)
```

---

## 2. 차트/그래프 이해

### 2.1 데이터 추출

```yaml
prompt: |
  이 차트를 분석해 주세요.

  <required_info>
  - 차트 유형 (막대, 선, 파이 등)
  - X축과 Y축 레이블
  - 모든 데이터 포인트 값
  - 범례 정보
  </required_info>

  <output_format>
  차트 유형: [유형]
  X축: [레이블]
  Y축: [레이블]
  데이터:
  | 항목 | 값 |
  |------|-----|
  | ... | ... |
  </output_format>
```

### 2.2 트렌드 분석

```yaml
prompt: |
  이 그래프의 트렌드를 분석해 주세요.

  <analysis_focus>
  - 전체적인 추세 (상승/하락/횡보)
  - 변곡점 (급격한 변화가 있는 시점)
  - 최고점과 최저점
  - 패턴 (주기성, 계절성 등)
  </analysis_focus>

  <business_insight>
  이 트렌드가 비즈니스에 미치는 영향을 설명해 주세요.
  </business_insight>
```

### 2.3 복합 차트

```yaml
prompt: |
  이 대시보드의 여러 차트를 분석해 주세요.

  <tasks>
  1. 각 차트를 개별적으로 해석
  2. 차트 간의 상관관계 파악
  3. 전체적인 인사이트 도출
  </tasks>

  <output_structure>
  ## 개별 차트 분석
  ### 차트 1: [제목]
  [분석]

  ## 상관관계
  [차트 간 연결점]

  ## 종합 인사이트
  [핵심 결론]
  </output_structure>
```

---

## 3. 문서 처리

### 3.1 OCR + 구조화

```yaml
prompt: |
  이 문서 이미지를 텍스트로 변환해 주세요.

  <requirements>
  - 원본의 레이아웃을 최대한 유지
  - 제목, 본문, 주석을 구분
  - 표가 있으면 마크다운 표로 변환
  - 읽기 어려운 부분은 [불명확] 표시
  </requirements>
```

### 3.2 표 추출

```yaml
prompt: |
  이 이미지의 표를 추출해 주세요.

  <output_format>
  마크다운 표 형식으로 출력:
  | 열1 | 열2 | 열3 |
  |-----|-----|-----|
  | 값1 | 값2 | 값3 |

  - 병합된 셀은 해당 값을 반복
  - 빈 셀은 "-" 표시
  </output_format>
```

### 3.3 양식/서류 처리

```yaml
prompt: |
  이 서류 양식을 분석해 주세요.

  <extraction_fields>
  - 문서 제목
  - 발행일
  - 발행 기관
  - 주요 필드와 값
  - 서명/도장 여부
  </extraction_fields>

  <output_format>
  {
    "document_type": "문서 유형",
    "title": "제목",
    "date": "날짜",
    "issuer": "발행 기관",
    "fields": {
      "필드명": "값"
    },
    "has_signature": true/false
  }
  </output_format>
```

---

## 4. 비교 분석

### 4.1 두 이미지 비교

```yaml
prompt: |
  두 이미지를 비교해 주세요.

  <comparison_criteria>
  - 공통점
  - 차이점
  - 품질 비교 (해상도, 선명도)
  - 내용 변화
  </comparison_criteria>

  <output_format>
  ## 공통점
  - [항목]

  ## 차이점
  | 항목 | 이미지 1 | 이미지 2 |
  |------|---------|---------|
  | ... | ... | ... |

  ## 결론
  [종합 비교 결과]
  </output_format>
```

### 4.2 Before/After 분석

```yaml
prompt: |
  이것은 변경 전/후 이미지입니다.

  <analysis>
  1. 어떤 변경이 있었는지 모두 나열해 주세요
  2. 각 변경의 의도를 추측해 주세요
  3. 개선되었는지 평가해 주세요
  </analysis>
```

---

## 5. 멀티모달 Few-shot

### 5.1 이미지-텍스트 쌍 예시

```yaml
prompt: |
  다음 예시를 참고하여 제품 설명을 작성해 주세요.

  <examples>
  <example id="1">
  [이미지: 빨간 운동화 사진]
  설명: "선명한 레드 컬러의 경량 러닝화입니다. 통기성 좋은 메쉬 소재와
  쿠션감 있는 미드솔이 특징입니다. 활동적인 라이프스타일에 적합합니다."
  </example>

  <example id="2">
  [이미지: 검정 가죽 가방 사진]
  설명: "클래식한 블랙 레더 토트백입니다. 넉넉한 수납공간과
  세련된 금속 장식이 돋보입니다. 비즈니스와 캐주얼 모두에 어울립니다."
  </example>
  </examples>

  [분석할 제품 이미지]

  위 예시와 같은 스타일로 설명을 작성해 주세요.
```

### 5.2 분류 예시

```yaml
prompt: |
  다음 예시를 보고 이미지를 분류해 주세요.

  <examples>
  <example>
  [이미지: 깨끗한 해변]
  분류: 자연/해변
  </example>

  <example>
  [이미지: 도시 스카이라인]
  분류: 도시/건축
  </example>

  <example>
  [이미지: 음식 플레이팅]
  분류: 음식/요리
  </example>
  </examples>

  [분류할 이미지]

  이 이미지의 분류와 그 이유를 알려주세요.
```

---

## 6. UI/UX 분석

### 6.1 스크린샷 분석

```yaml
prompt: |
  이 앱 스크린샷을 UX 관점에서 분석해 주세요.

  <evaluation_criteria>
  - 시각적 계층구조
  - 정보 구조
  - 네비게이션 명확성
  - 접근성 (대비, 폰트 크기)
  - CTA 버튼 가시성
  </evaluation_criteria>

  <output_format>
  ## 강점
  - [항목]

  ## 개선점
  - [항목]: [개선 방안]

  ## 종합 평가
  [점수 및 설명]
  </output_format>
```

### 6.2 디자인 피드백

```yaml
prompt: |
  이 웹페이지 디자인을 검토해 주세요.

  <focus_areas>
  - 레이아웃 균형
  - 색상 조화
  - 타이포그래피 가독성
  - 반응형 고려사항
  - 브랜드 일관성
  </focus_areas>

  구체적인 개선 제안을 포함해 주세요.
```

---

## 7. 모델별 팁

### OpenAI (GPT-4V/GPT-5)

- **고해상도 모드**: 세밀한 분석이 필요할 때
  ```python
  message = {
      "role": "user",
      "content": [
          {"type": "text", "text": "분석해 주세요"},
          {
              "type": "image_url",
              "image_url": {
                  "url": image_url,
                  "detail": "high"  # low, auto, high
              }
          }
      ]
  }
  ```
- **여러 이미지**: 최대 10개 이미지 동시 처리
- **이미지 크롭**: 관심 영역 지정 가능

### Anthropic (Claude)

- **대용량 컨텍스트**: 200K 토큰에 여러 이미지 포함 가능
  ```python
  import base64

  with open("image.png", "rb") as f:
      image_data = base64.b64encode(f.read()).decode()

  message = {
      "role": "user",
      "content": [
          {
              "type": "image",
              "source": {
                  "type": "base64",
                  "media_type": "image/png",
                  "data": image_data
              }
          },
          {"type": "text", "text": "분석해 주세요"}
      ]
  }
  ```
- **PDF 처리**: 문서 이미지 일괄 분석
- **Crop tool**: Opus 4.5에서 이미지 영역 줌인 가능

### 공통 최적화

```yaml
optimization_tips:
  - 이미지는 질문 전에 배치 (컨텍스트 우선)
  - 여러 이미지는 순서대로 번호 부여
  - 큰 이미지는 관련 영역만 크롭
  - 분석 목적을 명확히 명시
```

---

## 8. 프롬프트 템플릿

### 범용 이미지 분석

```yaml
system_prompt: |
  당신은 이미지 분석 전문가입니다.

  <capabilities>
  - 객체 인식 및 설명
  - 텍스트 추출 (OCR)
  - 차트/그래프 해석
  - 디자인 평가
  </capabilities>

  <rules>
  - 이미지에서 직접 확인할 수 있는 정보만 언급하세요
  - 불확실한 부분은 "~로 보입니다"로 표현하세요
  - 읽을 수 없는 텍스트는 [불명확]으로 표시하세요
  </rules>

  <style>
  - 격식체(~습니다) 사용
  - 구조화된 형식으로 응답
  </style>
```

### 제품 이미지 분석

```yaml
prompt: |
  이 제품 이미지를 e-commerce 상품 페이지용으로 분석해 주세요.

  <output_format>
  ## 제품 정보
  - 카테고리:
  - 색상:
  - 소재 (추정):
  - 특징:

  ## 마케팅 포인트
  - 강점:
  - 타겟 고객:
  - 제안 키워드:

  ## 상품 설명 (예시)
  [2-3문장의 설명문]
  </output_format>
```

---

## 9. 주의사항

### 한계 인식

```yaml
limitations:
  - 매우 작은 텍스트는 인식 불가할 수 있음
  - 손글씨는 인식률이 낮을 수 있음
  - 3D 공간 추론은 제한적
  - 특수 도메인(의료, 법률) 이미지는 전문가 확인 필요
```

### 프라이버시 고려

```yaml
privacy_rules:
  - 얼굴 식별 요청 시 주의
  - 개인정보가 포함된 문서 처리 시 마스킹 고려
  - 민감한 이미지(의료, 법적 문서)는 적절한 권한 확인
```

### 에러 처리

```yaml
error_handling: |
  이미지 분석이 실패할 수 있는 경우:
  - 이미지가 너무 작거나 흐림
  - 지원하지 않는 형식
  - 분석 요청이 모호함

  실패 시 응답:
  "이미지를 분석하기 어렵습니다. [구체적 이유].
  더 선명한 이미지를 제공하거나 분석 요청을 구체화해 주세요."
```
